<link rel="import" href="/bower_components/polymer/polymer.html">
<link rel="import" href="/bower_components/px-card/px-card.html">
<link rel="import" href="/bower_components/px-vis-pie-chart/px-vis-pie-chart.html">
<!-- <link rel="import" href="/bower_components/iron-ajax/iron-ajax.html"> -->


<dom-module id="pie-chart-card">
  <template>
    <px-card header-text="[[cardTitle]]" style="background-color:[[cardColor]]">
      <px-vis-pie-chart id="pieChart"
        use-percentage="true"
        width="550"
        height="350"
        register-config='{"width":150,"type":"vertical"}'
        margin='{"top":"10","bottom":"10","left":"0","right":"0"}'

        chart-data="[[chartData]]"
        includeAllSeries
        >
      </px-vis-pie-chart>
    </px-card>
  </template>
</dom-module>
<script>
  Polymer({
    is: 'pie-chart-card',
    properties: {
      cardTitle:{
        type: String
      },
      cardColor: {
        type: String
      },
      pieData: {
        type: Array,
        observer: 'dataChanged'
      },
      chartData: {
        type: Array
      }
    },
    dataChanged: function(){
      this.set('chartData', []);
      this.set('chartData', this.pieData);
    }
  });
</script>

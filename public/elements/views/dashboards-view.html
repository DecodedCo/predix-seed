<link rel="import" href="/bower_components/polymer/polymer.html">

<link rel="import" href="/bower_components/px-context-browser/px-context-browser.html">
<link rel="import" href="/bower_components/px-deck-selector/px-deck-selector.html">
<link rel="import" href="/bower_components/iron-ajax/iron-ajax.html">

<!-- local px-deck -->
<link rel="import" href="/elements/px-deck/px-deck-index.html">
<link rel="import" href="/elements/bar-chart-card/bar-chart-card.html">
<link rel="import" href="/elements/data-table-card/data-table-card.html">
<link rel="import" href="/elements/scatter-plot-card/scatter-plot-card.html">
<link rel="import" href="/elements/time-series-card/time-series-card.html">
<link rel="import" href="/elements/values-card/values-card.html">


<dom-module id="dashboards-view">
  <template>

    <script type="text/javascript" src="../../bower_components/es6-promise/es6-promise.min.js"></script>

    <iron-ajax
          id="getTags"
          auto
          method="GET"
          url="/predix-api/predix-timeseries/v1/tags"
          handle-as="json"
          content-type="application/json"
          on-response="_tagResponse"
    ></iron-ajax>

    <values-card tags="[[tags]]"></values-card>
    <!-- <scatter-plot-card></scatter-plot-card>
    <time-series-card></time-series-card> -->

  </template>
  <script>
    Polymer({

      is: 'dashboards-view',

      properties: {
        tags: {
          type: Object,
          value: {}
        }
      },

      ready: function ready() {
        var _this = this;

      },
      _tagResponse: function(e, details){
        let tags = details.response.results;
        let component = {
          tags: []
        };
        tags.forEach(function(tag){
          if(tag.indexOf('09')!== -1){   ///Change this value!!?
            component.tags.push({
              name: [ tag ]
            });
          }
        });
        this.tags = {
          "tags": component.tags
        };
      }

    });
  </script>
</dom-module>
